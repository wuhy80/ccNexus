# 复选框布局修复说明

## 修复内容

已修复设置页面中所有普通复选框的布局问题，确保复选框固定在左侧，文字不会换行。

## 修复的位置

### 1. 智能路由配置 (第 1259-1283 行)
- ✅ 模型路由 (settingsModelRouting)
- ✅ 负载均衡 (settingsLoadBalance)
- ✅ 成本优先 (settingsCostPriority)
- ✅ 配额路由 (settingsQuotaRouting)

### 2. 告警配置 (第 1039-1081 行)
- ✅ 恢复时通知 (settingsAlertNotifyOnRecovery)
- ✅ 系统通知 (settingsAlertSystemNotification)
- ✅ 性能告警 (settingsPerformanceAlertEnabled)
- ✅ 自动启用 (settingsAutoEnableOnRecovery)

## 技术细节

### 修复前的问题
```html
<div style="display: flex; align-items: center; gap: 8px;">
    <input type="checkbox" id="settingsModelRouting">
    <span style="font-size: 13px;">模型路由</span>
</div>
```

**问题**：
- 复选框没有固定宽度，可能被压缩
- 文字标签没有设置 flex 属性，容易换行
- 复选框可能有默认的 margin，导致位置不准确

### 修复后的代码
```html
<div style="display: flex; align-items: center; gap: 8px;">
    <input type="checkbox" id="settingsModelRouting"
           style="flex-shrink: 0; width: 16px; height: 16px; margin: 0;">
    <span style="font-size: 13px; flex: 1;">模型路由</span>
</div>
```

**改进**：
- `flex-shrink: 0` - 防止复选框被压缩
- `width: 16px; height: 16px` - 固定复选框尺寸
- `margin: 0` - 移除默认边距，确保位置准确
- `flex: 1` - 让文字标签占据剩余空间，防止换行

## 视觉效果

### 修复前
```
☐ 模型路
  由
☐ 负载均
  衡
```

### 修复后
```
☐ 模型路由
☐ 负载均衡
☐ 成本优先
☐ 配额路由
```

## 未修改的部分

以下复选框使用了 `toggle-switch` 样式（开关按钮），布局正常，无需修改：
- 主题自动切换 (settingsThemeAuto)
- 启用告警 (settingsAlertEnabled)
- 会话亲和性 (settingsSessionAffinityEnabled)
- 启用缓存 (settingsCacheEnabled)
- 速率限制 (settingsRateLimitEnabled)
- 智能路由总开关 (settingsRoutingEnabled)
- 交互记录 (interactionEnabledToggle)

这些使用的是自定义的开关样式：
```html
<label class="toggle-switch" style="width: 40px; height: 20px;">
    <input type="checkbox" id="...">
    <span class="toggle-slider"></span>
</label>
```

## 测试建议

1. **启动应用**
   ```bash
   cd cmd/desktop
   wails dev
   ```

2. **测试步骤**
   - 打开设置页面
   - 点击"智能路由"开关，展开配置
   - 检查"模型路由"、"负载均衡"、"成本优先"、"配额路由"的显示
   - 点击"启用告警"开关，展开配置
   - 检查所有复选框的显示是否整齐，文字是否换行

3. **预期结果**
   - 所有复选框紧贴左侧
   - 复选框宽度固定为 16px
   - 文字标签在一行内完整显示，不换行
   - 复选框和文字之间有 8px 的间距

## 兼容性

此修复使用标准的 CSS Flexbox 属性，兼容所有现代浏览器：
- Chrome/Edge 29+
- Firefox 28+
- Safari 9+
- Wails WebView (基于系统浏览器)

## 相关文件

- `cmd/desktop/frontend/src/modules/ui.js` - 主要修改文件
- `cmd/desktop/frontend/src/modules/settings.js` - 设置逻辑（未修改）

## 更新日志

- 2026-01-17: 修复智能路由和告警配置中的复选框布局问题
  - 添加固定宽度和高度
  - 防止复选框被压缩
  - 确保文字标签不换行
